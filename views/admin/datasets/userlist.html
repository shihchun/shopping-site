<table class="table table-hover table-bordered text-center">
    <thead>
        <tr>
            <th>姓名</th>
            <th>Email</th>
            <th>生日</th>
            <th>查看</th>
            <th>修改</th>
            <th>刪除</th>
        </tr>
    </thead>
    <tbody>
        {% for item in userlist %}
        <tr class="item-id-{{ item._id | safe }}">
            <td>{{ item.fullname }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.DOB | date('Y-m-d') }}</td>
            <td><a target="_blank" href="/admin/users/{{ item._id | safe }}"><button class="btn btn-success" type="button">查看</button></a></td>
            <td><a target="_blank" href="/admin/users/update/{{ item._id | safe }}"> <button class="btn btn-warning" type="button">修改</button></a></td>
            <td><button class="btn btn-danger del" type="button" data-id="{{ item._id | safe }}">刪除</button></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<script >
$(document).ready(function(){
    $('.del').on('click', function(e){
        $target = $(e.target);
        const id = $target.attr('data-id')
        $.ajax({
            type: 'DELETE',
            url: '/admin/users/delete/' +id,
            success: function(response){
            alert('Deleted');
            window.location.herf='/admin/';
            },
            error: function(err){
                console.log(err);
            }
        });
    })
})
// after finish add to src="/js/userDelete.js"
// 处理删除数据的逻辑
// $(function () {
//     $('.del').click(function (e) {
//         var target = $(e.target);
//         var id = target.data('data-id');
//         var tr = $('.item-id-' + id);

//         $.ajax({
//             type: 'DELETE', // 异步请求类型：删除
//             url: '/admin/users/delete?id=' + id,
//         }).done(function (results) {
//             if (results.success === 1) {
//                 if (tr.length > 0) {
//                     tr.remove();
//                 }
//             }
//         });
//     });
// });
</script>